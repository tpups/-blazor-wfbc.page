@inherits LayoutComponentBase
@using BlazorPro.BlazorSize
@inject AppState AppState
@implements IDisposable

<MediaQueryList>

    <MediaQuery Media="@Breakpoints.XSmallDown">
        <Matched>
            <MobileDrawer />
        </Matched>
    </MediaQuery>
    <MediaQuery Media="@Breakpoints.Between(Breakpoints.SmallUp, Breakpoints.MediumDown)">
        <Matched>
            <TabletDrawer />
        </Matched>
    </MediaQuery>

    <div class="drawer-container @AppState.DrawerCssClass @AppState.MobileCssClass">
        <aside class="drawer">
            <div class="drawer-logo">
                <DrawerLogo />
            </div>
            <nav class="side-menu @AppState.SideMenuCssClass">
                <NavMenu />
            </nav>
        </aside>
        <div class="main-container">
            <MenuBar />
            <div class="main" @onclick="@CloseManagerMenu">
                <div class="content px-4"> 
                    @Body
                </div>
            </div>
        </div>
    </div>
</MediaQueryList>

@code {

    public void CloseManagerMenu()
    {
        AppState.SetOpenManagerMenu(close: true);
    }

    protected override void OnInitialized()
    {
        AppState.SetIsLarge(true);
        AppState.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        AppState.OnChange -= StateHasChanged;
    }
}
